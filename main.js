import*as e from"three";import{SVGLoader as t}from"three/addons/loaders/SVGLoader.js";import{OrbitControls as n}from"three/addons/controls/OrbitControls.js";function main(){let i=document.querySelector("#c"),o=new e.WebGLRenderer({canvas:i}),r=new e.PerspectiveCamera(90,2,.1,1e3);r.position.set(0,0,200);let l=new e.Scene;l.background=new e.Color(0),o.render(l,r);let a=new n(r,o.domElement);a.enableDamping=!0;let s=new e.CubeTextureLoader().setPath("./assets/cubemaps/cubemap1/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);l.environment=s;let d=new e.MeshBasicMaterial({color:16777215}),c=new e.BoxGeometry(1,1,1),$=[],h=new e.Group;for(let u=0;u<1e3;u++){let m=new e.Mesh(c,d);h.add(m),$.push(m)}l.add(h),h.visible=!1;let p=new t,y={depth:100,bevelEnabled:!0,bevelThickness:5,bevelSize:10,bevelOffset:0,bevelSegments:5},f=new e.MeshStandardMaterial({color:16777215,metalness:.8,roughness:0,side:e.DoubleSide,envMap:s}),g=new e.MeshBasicMaterial({color:16711680,wireframe:!0}),b=["","",""];for(let E=0;E<3;E++)for(let _=0;_<3;_++)for(let v=0;v<3;v++){let w=Math.floor(36*Math.random()),x="assets/svgs/svgFile ("+(w+1)+").svg",F=-50+50*v,B=50-50*_,C=50-50*E,S,M;.5>Math.random()?(S=f,b[E]+=k(w),M="answer"):(S=g,M="obstacle"),p.load(x,e=>{L(e,F,B,C,S,M)})}function k(e){return e<26?String.fromCharCode(e+65):String.fromCharCode(e+22)}console.log("why you cheatin :((",b);let I=[];function L(n,i,o,r,a,s){let d=n.paths,c=new e.Group;c.name=s,d.forEach(n=>{let i=t.createShapes(n);i.forEach(t=>{let n=new e.ExtrudeGeometry(t,y),i=new e.Mesh(n,a);c.add(i)})}),c.rotation.x=Math.PI,c.position.set(-25+i,25+o+20,r),c.scale.set(.05,.05,.05),I.push(c),l.add(c)}let W=!1;document.getElementById("submit-button").addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("input1").value,n=document.getElementById("input2").value,i=document.getElementById("input3").value,o=document.getElementById("answer-state");if(t===b[0]&&n===b[1]&&i===b[2])W=!0,o.textContent="DM SCREENSHOT TO @band_9b2",o.style.display="block",h.visible=!0;else{let r="WRONG:  ";[t,n,i].forEach((e,t)=>{e!==b[t]&&(r+="answer"+(t+1)+"      ")}),o.textContent=r,o.style.display="block"}}),document.getElementById("close-hint-button").addEventListener("click",function(){document.getElementById("hint-image").style.display="none"}),document.querySelectorAll("input").forEach(e=>{e.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()})});let j=new e.Raycaster,G=new e.Vector2;function H(e){e.touches?(G.x=e.touches[0].clientX/window.innerWidth*2-1,G.y=-(2*(e.touches[0].clientY/window.innerHeight))+1):(G.x=e.clientX/window.innerWidth*2-1,G.y=-(2*(e.clientY/window.innerHeight))+1);let t=j.intersectObjects(l.children);"obstacle"==t[0].object.parent.name&&t[0].object.parent.scale.set(0,0,0)}function O(t){if(W&&(I.forEach(function(t){t.position.add(new e.Vector3((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2))}),$.forEach(function(t){t.position.add(new e.Vector3((Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10))})),t*=.001,a.update(),function e(t){let n=t.domElement,i=window.devicePixelRatio,o=n.clientWidth*i|0,r=n.clientHeight*i|0,l=n.width!==o||n.height!==r;return l&&t.setSize(o,r,!1),l}(o)){let n=o.domElement;r.aspect=n.clientWidth/n.clientHeight,r.updateProjectionMatrix()}o.render(l,r),j.setFromCamera(G,r),j.intersectObjects(l.children),requestAnimationFrame(O)}window.addEventListener("pointermove",function e(t){t.preventDefault(),t.touches?(G.x=t.touches[0].clientX/window.innerWidth*2-1,G.y=-(2*(t.touches[0].clientY/window.innerHeight))+1):(G.x=t.clientX/window.innerWidth*2-1,G.y=-(2*(t.clientY/window.innerHeight))+1)}),window.addEventListener("pointerdown",H),window.addEventListener("touchstart",H,!1),document.getElementById("hint-button").addEventListener("click",function(){let e=document.getElementById("hint-image");"none"==e.style.display||""==e.style.display?e.style.display="block":e.style.display="none"}),requestAnimationFrame(O)}main();